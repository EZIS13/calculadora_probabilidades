function factorial(n){let r=1;for(let i=2;i<=n;i++)r*=i;return r;}
function calcFactorial(){const n=Number(document.getElementById('n').value);document.getElementById('resFact').innerText=`${n}! = ${factorial(n)}`;}
function calcNPr(){const n=Number(document.getElementById('nPr_n').value),r=Number(document.getElementById('nPr_r').value);document.getElementById('resPr').innerText=`P(${n},${r})=${factorial(n)/factorial(n-r)}`;}
function calcNCr(){const n=Number(document.getElementById('nCr_n').value),r=Number(document.getElementById('nCr_r').value);document.getElementById('resCr').innerText=`C(${n},${r})=${factorial(n)/(factorial(r)*factorial(n-r))}`;}
function calcProb(){const fav=Number(document.getElementById('fav').value),pos=Number(document.getElementById('pos').value);if(pos<=0)return document.getElementById('resProb').innerText='Casos posibles debe ser >0';const p=fav/pos;document.getElementById('resProb').innerText=`P = ${p.toFixed(4)} (${fav}/${pos})`;}
function nCr(n,r){return factorial(n)/(factorial(r)*factorial(n-r));}
function binomialPMF(n,k,p){return nCr(n,k)*Math.pow(p,k)*Math.pow(1-p,n-k);}
function calcBinomial(){const n=Number(document.getElementById('bin_n').value);const k=Number(document.getElementById('bin_k').value);const p=Number(document.getElementById('bin_p').value);const res=binomialPMF(n,k,p);document.getElementById('resBin').innerText=`P(X=${k})=${res.toFixed(6)}`;const labels=[],values=[];for(let i=0;i<=n;i++){labels.push(i);values.push(binomialPMF(n,i,p));}renderChart('binChart',labels,values);}
let charts={};function renderChart(id,labels,data){const ctx=document.getElementById(id);if(charts[id])charts[id].destroy();charts[id]=new Chart(ctx,{type:'bar',data:{labels:labels,datasets:[{label:'DistribuciÃ³n Binomial',data:data,backgroundColor:'rgba(255,255,255,0.5)',borderRadius:6}]},options:{responsive:true,animation:{duration:1500},scales:{x:{ticks:{color:'white'}},y:{ticks:{color:'white'}}},plugins:{legend:{display:false}}}});}